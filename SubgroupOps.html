<!doctype html><html lang="en"><head><meta charset="utf8"><title>Argdown Document</title><link rel="stylesheet" href="./argdown.css"></head><body><div class="argdown"><h2 data-line="1" id="heading-robust-buffer-access" class="has-line heading"><span class="statement-content">Robust Buffer Access</span></h2><div data-line="9" class="statement has-line top-level"><span id="statement-extension" class="definition statement-definition definiendum top-level">[<span class="title statement-title">Extension</span>]: </span><span class="statement-content top-level">We should have an extension to expose subgroup operations.</span><div class="relations"><div data-line="10" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="10" class="argument has-line"><a id="argument-performance" href="#argument-performance" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Performance</span>&gt;: </a><span class="statement-content">depending on a workload and the platform, it's possible to run <a href="https://developer.nvidia.com/blog/cuda-pro-tip-optimized-filtering-warp-aggregated-atomics/">multiple times</a> faster.</span></div></div><div data-line="11" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="11" class="argument has-line"><a id="argument-support" href="#argument-support" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Support</span>&gt;: </a><span class="statement-content">all 3 target APIs have some variation of subgroup operations, optionally.</span></div></div></div></div><div data-line="13" class="statement has-line top-level"><span id="statement-size-control" class="definition statement-definition definiendum top-level">[<span class="title statement-title">Size Control</span>]: </span><span class="statement-content top-level">We should let the developer to control the size of subgroups (in compute workloads).</span><div class="relations"><div data-line="14" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="14" class="statement has-line"><span class="statement-content">Vulkan has <a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/man/html/VK_EXT_subgroup_size_control.html">VK_EXT_subgroup_size_control</a> extension to control the size.</span></div></div><div data-line="15" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="15" class="statement has-line"><span class="statement-content">D3D12 and Metal don't allow to control the size.</span></div></div></div></div><div data-line="17" class="statement has-line top-level"><span id="statement-size-query" class="definition statement-definition definiendum top-level">[<span class="title statement-title">Size Query</span>]: </span><span class="statement-content top-level">We should allow the developer to query the subgroup size from a compute pipeline.</span><div class="relations"><div data-line="18" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="18" class="statement has-line"><span class="statement-content">Vulkan has <a href="https://www.khronos.org/registry/vulkan/specs/1.2-extensions/man/html/VK_KHR_pipeline_executable_properties.html">VK_KHR_pipeline_executable_properties</a> extension to query the size.</span></div></div><div data-line="19" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="19" class="statement has-line"><span class="statement-content">Metal has <a href="https://developer.apple.com/documentation/metal/mtlcomputepipelinestate/1414911-threadexecutionwidth">threadExecutionWidth</a> to query the size.</span></div></div><div data-line="20" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="20" class="statement has-line"><span class="statement-content">D3D12 doesn't have anything to query the exact size.</span></div></div><div data-line="21" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="21" class="argument has-line"><a id="argument-useless" href="#argument-useless" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Useless</span>&gt;: </a><span class="statement-content">it's not actionable in Vulkan and D3D12, unlike Metal where we can control the workgroup size from the API.</span></div></div></div></div><div data-line="23" class="statement has-line top-level"><span id="statement-quad-ops" class="definition statement-definition definiendum top-level">[<span class="title statement-title">Quad Ops</span>]: </span><span class="statement-content top-level">We should expose the quad operations in fragment shaders.</span><div class="relations"><div data-line="24" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="24" class="statement has-line"><span class="statement-content">new Adreno and PowerVR hardware doesn't support this</span></div></div></div></div><div data-line="27" class="statement has-line top-level"><span id="statement-non-uniform" class="definition statement-definition definiendum top-level">[<span class="title statement-title">Non-uniform</span>]: </span><span class="statement-content top-level">We should support the non-uniform subgroup model.</span><div class="relations"><div data-line="28" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="28" class="argument has-line"><a id="argument-everywhere" href="#argument-everywhere" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Everywhere</span>&gt;: </a><span class="statement-content">Vulkan, D3D, and Metal use a non-uniform model.</span></div></div><div data-line="29" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="29" class="argument has-line"><a id="argument-ambiguous-divergence" href="#argument-ambiguous-divergence" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Ambiguous Divergence</span>&gt;: </a><span class="statement-content">when invocations in a subgroup are executing &quot;together&quot;, how long is that guaranteed?</span></div></div><div data-line="30" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="30" class="argument has-line"><a id="argument-ambiguous-reconvergence" href="#argument-ambiguous-reconvergence" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Ambiguous Reconvergence</span>&gt;: </a><span class="statement-content">once invocations diverge, what are the guarantees about where you reconverge?</span><div class="relations"><div data-line="31" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="31" class="statement has-line"><span class="statement-content">Vulkan has weak guarantees, D3D12 and Metal don't have anything.</span></div></div><div data-line="32" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="32" class="statement has-line"><span class="statement-content">we can just say invocations never reconverge, which matches AMD ISA and CUDA models.</span></div></div></div></div></div><div data-line="33" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="33" class="argument has-line"><a id="argument-ambiguous-forward-progress" href="#argument-ambiguous-forward-progress" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Ambiguous Forward Progress</span>&gt;: </a><span class="statement-content">how blocks affect progress of other blocks, and invocations within blocks affect progress on other invocations?</span><div class="relations"><div data-line="34" class="has-line outgoing support relation"><div class="outgoing support relation-symbol"><span>+</span></div><div data-line="34" class="statement has-line"><span class="statement-content">D3D, Metal, and Vulkan are silent on both of these.</span></div></div></div></div></div><div data-line="35" class="has-line outgoing attack relation"><div class="outgoing attack relation-symbol"><span>-</span></div><div data-line="35" class="argument has-line"><a id="argument-ambiguous-helpers" href="#argument-ambiguous-helpers" class="definition argument-definition definiendum">&lt;<span class="title argument-title">Ambiguous Helpers</span>&gt;: </a><span class="statement-content">do helper invocations participate in subgroup operations?</span></div></div></div></div></div></body></html>